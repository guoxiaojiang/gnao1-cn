# GNAO1后台编辑系统使用指南

## 功能概述

本系统提供了一个完整的后台编辑系统，用于管理GNAO1患者之家网站的"最新资讯"内容。

## 功能特性

### 1. 管理员认证
- 安全的登录系统
- JWT token认证
- Cookie-based会话管理

### 2. 文章管理
- 创建新文章
- 编辑现有文章
- 删除文章
- 文章状态管理（草稿、已发布、审核中、已归档）
- 置顶文章功能

### 3. 富文本编辑
- 基于Markdown的编辑器
- 实时预览功能
- 支持图片、链接、表格等多种内容格式

### 4. 分类和标签
- 文章分类管理
- 标签系统
- 搜索和筛选功能

## 使用方法

### 1. 访问后台
访问 `/news_publish` 路径进入后台管理系统

### 2. 登录信息
- 用户名：`gnao1_cn`
- 密码：`gnao1_admin`

### 3. 文章管理操作

#### 创建文章
1. 点击"创建文章"按钮
2. 填写文章标题、摘要、内容等信息
3. 选择文章状态（草稿/已发布等）
4. 添加标签（用逗号分隔）
5. 可选：上传封面图片
6. 可选：设置为置顶文章
7. 点击"创建文章"保存

#### 编辑文章
1. 在文章列表中点击"编辑"按钮
2. 修改文章内容
3. 点击"更新文章"保存更改

#### 删除文章
1. 在文章列表中点击"删除"按钮
2. 确认删除操作

### 4. 文章状态说明
- **草稿**: 未发布的文章，前台不显示
- **已发布**: 公开可见的文章
- **审核中**: 等待审核的文章
- **已归档**: 归档的文章，前台不显示

## 技术架构

### 前端技术
- Next.js 15 + React 19
- TypeScript
- Tailwind CSS
- Radix UI组件库
- Lucide React图标

### 后端技术
- Next.js API Routes
- Prisma ORM
- SQLite数据库（可配置为PostgreSQL）
- JWT认证

### 富文本编辑器
- @uiw/react-md-editor
- Markdown格式支持
- 实时预览功能

## 数据库结构

### 主要数据表
- `articles`: 文章数据
- `users`: 用户数据
- `categories`: 分类数据
- `tags`: 标签数据
- `article_tags`: 文章标签关联表

## API接口

### 公开接口
- `GET /api/articles` - 获取已发布文章列表
- `GET /api/articles/[id]` - 获取单个文章详情

### 管理员接口
- `POST /api/admin/auth` - 管理员登录
- `DELETE /api/admin/auth` - 管理员登出
- `GET /api/admin/articles` - 获取所有文章列表
- `POST /api/admin/articles` - 创建新文章
- `GET /api/admin/articles/[id]` - 获取单个文章
- `PUT /api/admin/articles/[id]` - 更新文章
- `DELETE /api/admin/articles/[id]` - 删除文章

## 前台显示

### 新闻列表页面
访问 `/news` 查看所有已发布的文章

### 文章详情页面
访问 `/news/[文章ID]` 查看单个文章的完整内容

## 安全措施

1. JWT token认证
2. Cookie HttpOnly设置
3. 管理员权限验证
4. 输入数据验证
5. SQL注入防护（Prisma ORM）

## 部署注意事项

1. 配置正确的数据库连接
2. 设置安全的JWT密钥
3. 配置HTTPS（生产环境）
4. 定期备份数据库
5. 监控系统日志

## 故障排除

### 常见问题
1. **无法登录**: 检查用户名和密码是否正确
2. **文章不显示**: 确认文章状态为"已发布"
3. **富文本编辑器不加载**: 检查网络连接和JavaScript是否启用
4. **API错误**: 查看浏览器控制台和服务器日志

### 技术支持
如有技术问题，请检查：
1. 数据库连接是否正常
2. 环境变量是否正确配置
3. 依赖包是否完整安装
4. 端口是否被占用

---

## 更新日志

### v1.0.0 (2025-09-21)
- 初始版本发布
- 实现基础的文章管理功能
- 集成富文本编辑器
- 完成管理员认证系统
- 实现前台文章展示功能